<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AutonomousCarService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">4HWC Autonomous Car</a> &gt; <a href="index.source.html" class="el_package">com.autonomouscar.service</a> &gt; <span class="el_source">AutonomousCarService.java</span></div><h1>AutonomousCarService.java</h1><pre class="source lang-java linenums">package com.autonomouscar.service;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import com.autonomouscar.exceptions.AutonomousCarException;
import com.autonomouscar.logs.AutonomousCarLog;
import com.autonomouscar.model.AutonomousCar;

/**
 * 
 * &lt;b&gt;This class contains the application's logic&lt;/b&gt;
 * 
 * 
 * @see AutonomousCarServiceTest
 * 
 * @see AutonomousCar
 * 
 * @author Fanon Jupkwo
 */

<span class="fc" id="L25">public class AutonomousCarService {</span>

	/**
	 * Constant representing the maximum number of instructions generated randomly
	 * 
	 * @see AutonomousCarService#getInstructions4HWC()
	 */

	public static final int NUMBER_OF_INSTRUCTIONS_MAX = 50;

	/**
	 * Constant representing the maximum number of cars generated randomly
	 * 
	 * @see AutonomousCarService#getNombreDeVehicules4HWC()
	 */

	public static final int NUMBER_OF_VEHICLES_MAX = 20;

	/**
	 * Constant representing an error message related to wrong orientation
	 * 
	 * @see AutonomousCarService#validationOrientationInitiale(String)
	 */

	public static final String MESSAGEERRORNEWS = &quot;Veuillez entrer une lettre N , E , W ou S&quot;;

	/**
	 * Constant representing an error message related to wrong orientation
	 * 
	 * @see AutonomousCarService#validationOrientationInitiale(String)
	 */

	public static final String MESSAGEERRORO = &quot;Veuillez entrer l'orientation&quot;;

	/**
	 * Constant representing an error message related to wrong position on the
	 * surface
	 * 
	 * @see AutonomousCarService#validationPositionsString(String, String, String,
	 *      String)
	 */

	public static final String MESSAGEERRORVEHICULE = &quot;S'il vous plaît choisissez une position correcte du véhicule&quot;;

	/**
	 * Constant representing an error message related to wrong dimensions of the
	 * surface
	 * 
	 * @see AutonomousCarService#validationPositionsString(String, String, String,
	 *      String)
	 */

	public static final String MESSAGEERRORCD = &quot;S'il vous plaît choisissez une position correcte du coin Supérieur Droit&quot;;

	/**
	 * Constant representing an error message related to wrong number of cars
	 * 
	 * @see AutonomousCarService#validationNombreDeVehiculesString(String)
	 */

	public static final String MESSAGEERRORNBRE = &quot;S'il vous plaît saisissez des caractères numériques&quot;;

	/**
	 * Constant representing an error message related to wrong instructions
	 * 
	 * @see AutonomousCarService#validationInstructions(String)
	 */

	public static final String MESSAGEERRORESPACES = &quot;Les espaces sont interdits dans vos instructions&quot;;

	/**
	 * Constant representing an error message related to wrong instructions
	 * 
	 * @see AutonomousCarService#validationInstructions(String)
	 */

	public static final String MESSAGEERRORDGA = &quot;Les instructions contiennent uniquement D, G ou A&quot;;

	/**
	 * Constant representing an error message related to wrong instructions
	 * 
	 * @see AutonomousCarService#validationInstructions(String)
	 */

	public static final String MESSAGEERRORI = &quot;Veuillez entrer des instructions&quot;;

	/**
	 * Constant representing an error message related to wrong number of cars
	 * 
	 * @see AutonomousCarService#validationNombreDeVehiculesString(String)
	 */

	public static final String MESSAGEERRORNUMBEROFCARS = &quot;S'il vous plaît choisissez un nombre supérieur ou égal à 1&quot;;

	/**
	 * 
	 * Verifies if the number of cars is correct
	 * 
	 * @param nbre
	 * @throws AutonomousCarException if nbre is not a number or if nbre is inferior
	 *                                than 1
	 */

	public void validationNombreDeVehicules(String nbre) throws AutonomousCarException {

		try {
<span class="fc" id="L131">			int number = Integer.parseInt(nbre.trim());</span>

<span class="fc bfc" id="L133" title="All 2 branches covered.">			if (number &gt;= 1) {</span>

			}

			else {
<span class="fc" id="L138">				throw new AutonomousCarException(MESSAGEERRORNUMBEROFCARS);</span>
			}

<span class="fc" id="L141">		} catch (NumberFormatException e) {</span>

<span class="fc" id="L143">			throw new AutonomousCarException(MESSAGEERRORNUMBEROFCARS);</span>

<span class="fc" id="L145">		}</span>

<span class="fc" id="L147">	}</span>

	/**
	 * 
	 * Verifies if the orientation is correct
	 * 
	 * @param orientationInitiale
	 * @throws AutonomousCarException
	 */

	public void validationOrientationInitiale(String orientationInitiale) throws AutonomousCarException {

<span class="pc bpc" id="L159" title="1 of 2 branches missed.">		if (orientationInitiale != null) {</span>
<span class="fc" id="L160">			String orientationInitialeTrim = orientationInitiale.trim().toUpperCase();</span>

<span class="pc bpc" id="L162" title="1 of 2 branches missed.">			if (orientationInitialeTrim.length() != 0) {</span>
<span class="fc bfc" id="L163" title="All 2 branches covered.">				if (orientationInitialeTrim.length() == 1) {</span>
<span class="fc bfc" id="L164" title="All 4 branches covered.">					if (orientationInitialeTrim.equals(&quot;N&quot;) || orientationInitialeTrim.equals(&quot;E&quot;)</span>
<span class="fc bfc" id="L165" title="All 4 branches covered.">							|| orientationInitialeTrim.equals(&quot;W&quot;) || orientationInitialeTrim.equals(&quot;S&quot;)) {</span>

					} else {

						// AutonomousCarLog.logger.error(&quot;Veuillez entrer une lettre N , E , W ou S&quot;);
<span class="fc" id="L170">						throw new AutonomousCarException(MESSAGEERRORNEWS);</span>

					} // 4e if
				} else {

					// AutonomousCarLog.logger.error(&quot;Veuillez entrer une lettre N , E , W ou S&quot;);
<span class="fc" id="L176">					throw new AutonomousCarException(MESSAGEERRORNEWS);</span>
				} // 3e if
			} else {

				// AutonomousCarLog.logger.error(&quot;Veuillez entrer l'orientation&quot;);
<span class="nc" id="L181">				throw new AutonomousCarException(MESSAGEERRORO);</span>
			} // 2e if
<span class="fc" id="L183">		} else {</span>

			// AutonomousCarLog.logger.error(&quot;Veuillez entrer l'orientation&quot;);
<span class="nc" id="L186">			throw new AutonomousCarException(MESSAGEERRORO);</span>
		} // 1er if

<span class="fc" id="L189">	}</span>

	/**
	 * 
	 * Verifies if car's position and surface dimensions are correct
	 * 
	 * @param xCoinDroit
	 * @param yCoinDroit
	 * @param orientationInitiale
	 * @param orientationInitiale
	 * @throws AutonomousCarException
	 */

	public void validationPositionsString(String xCoinDroit, String yCoinDroit, String xInitiale, String yInitiale)
			throws AutonomousCarException {

		try {

<span class="fc" id="L207">			int xCoinDroitInt = Integer.parseInt(xCoinDroit.trim());</span>

<span class="fc" id="L209">			int yCoinDroitInt = Integer.parseInt(yCoinDroit.trim());</span>

<span class="fc" id="L211">			int xInitialeInt = Integer.parseInt(xInitiale.trim());</span>

<span class="fc" id="L213">			int yInitialeInt = Integer.parseInt(yInitiale.trim());</span>

<span class="pc bpc" id="L215" title="3 of 8 branches missed.">			if (xCoinDroitInt &gt;= 0 &amp;&amp; xCoinDroitInt &lt;= 5 &amp;&amp; yCoinDroitInt &gt;= 0 &amp;&amp; yCoinDroitInt &lt;= 5) {</span>
<span class="pc bpc" id="L216" title="3 of 8 branches missed.">				if (xInitialeInt &gt;= 0 &amp;&amp; xInitialeInt &lt;= xCoinDroitInt &amp;&amp; yInitialeInt &gt;= 0</span>
						&amp;&amp; yInitialeInt &lt;= yCoinDroitInt) {

				} else {

<span class="fc" id="L221">					throw new AutonomousCarException(MESSAGEERRORVEHICULE);</span>
				}
			} else {
<span class="fc" id="L224">				throw new AutonomousCarException(MESSAGEERRORCD);</span>

			}

<span class="fc" id="L228">		} catch (NumberFormatException e) {</span>

<span class="fc" id="L230">			throw new AutonomousCarException(MESSAGEERRORNBRE);</span>

<span class="fc" id="L232">		}</span>

<span class="fc" id="L234">	}</span>

	/**
	 * 
	 * Verifies if instructions are correct
	 * 
	 * @param instructions
	 * @throws AutonomousCarException
	 */

	public void validationInstructions(String instructions) throws AutonomousCarException {

<span class="pc bpc" id="L246" title="1 of 2 branches missed.">		if (instructions != null) {</span>
<span class="fc" id="L247">			String instructionsTrim = instructions.trim();</span>

<span class="pc bpc" id="L249" title="1 of 2 branches missed.">			if (instructionsTrim.length() != 0) {</span>

<span class="fc bfc" id="L251" title="All 2 branches covered.">				for (int i = 0; i &lt; instructionsTrim.length(); i++) { // Boucle</span>
																		// pour
																		// rechercher
																		// l'espace

<span class="fc bfc" id="L256" title="All 2 branches covered.">					if (instructionsTrim.charAt(i) == ' ') // Dès que je trouve</span>
															// un
					// espace, c'est pas
					// correct
					{

<span class="fc" id="L262">						throw new AutonomousCarException(MESSAGEERRORESPACES);</span>

					}
				} // for

<span class="fc" id="L267">				String instructionsTrimMaj = instructionsTrim.toUpperCase(); // Je</span>
																				// convertis
																				// tout
																				// à
																				// majuscule

<span class="fc" id="L273">				int compteurLettresCorrectes = 0;</span>

<span class="fc bfc" id="L275" title="All 2 branches covered.">				for (int j = 0; j &lt; instructionsTrimMaj.length(); j++) {</span>

<span class="fc" id="L277">					String instructionsTrimMajString = instructionsTrimMaj.charAt(j) + &quot;&quot;;</span>

<span class="fc bfc" id="L279" title="All 4 branches covered.">					if (instructionsTrimMajString.equals(&quot;A&quot;) || instructionsTrimMajString.equals(&quot;D&quot;)</span>
<span class="pc bpc" id="L280" title="1 of 2 branches missed.">							|| instructionsTrimMajString.equals(&quot;G&quot;)) {</span>
						// Correct

<span class="fc" id="L283">						compteurLettresCorrectes++;</span>

<span class="fc bfc" id="L285" title="All 2 branches covered.">						if (compteurLettresCorrectes == instructionsTrimMaj.length()) {</span>

						}

					} else {
						// Présence d'un intrus

<span class="nc" id="L292">						throw new AutonomousCarException(MESSAGEERRORDGA);</span>

					}

				} // for

<span class="fc" id="L298">			} else {</span>

<span class="nc" id="L300">				throw new AutonomousCarException(MESSAGEERRORI);</span>

			}
<span class="fc" id="L303">		} else {</span>
<span class="nc" id="L304">			throw new AutonomousCarException(MESSAGEERRORI);</span>
		}

<span class="fc" id="L307">	}</span>

	/**
	 * Reads Cars Data from a file
	 * 
	 */

	public List&lt;AutonomousCar&gt; recupFichierBase() {

<span class="nc" id="L316">		List&lt;AutonomousCar&gt; listeInitiale = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L318">		List&lt;String&gt; lignes = new ArrayList&lt;String&gt;();</span>

<span class="nc" id="L320">		InputStream inputStream = AutonomousCarService.class.getClassLoader().getResourceAsStream(&quot;default4HWC.txt&quot;);</span>

<span class="nc bnc" id="L322" title="All 2 branches missed.">		if (inputStream != null) {</span>

			// Début du traitement

			try {

<span class="nc" id="L328">				byte[] buf = new byte[2048];</span>

<span class="nc" id="L330">				int count = 0;</span>

<span class="nc" id="L332">				int n = 0;</span>

<span class="nc" id="L334">				String ligne = &quot;&quot;;</span>

<span class="nc bnc" id="L336" title="All 2 branches missed.">				while ((n = inputStream.read(buf)) &gt;= 0) {</span>
<span class="nc bnc" id="L337" title="All 2 branches missed.">					for (int i = 0; i &lt; n; i++) {</span>

<span class="nc bnc" id="L339" title="All 2 branches missed.">						if (buf[i] != '\n') {</span>
<span class="nc" id="L340">							ligne = ligne + (char) buf[i];</span>

<span class="nc bnc" id="L342" title="All 2 branches missed.">							if (i == n - 1) // enregistrement dernière ligne</span>
<span class="nc" id="L343">								lignes.add(ligne);</span>
						}

<span class="nc bnc" id="L346" title="All 2 branches missed.">						if (buf[i] == '\n') {</span>

							// System.out.println(ligne);

<span class="nc" id="L350">							lignes.add(ligne);</span>
<span class="nc" id="L351">							count++;</span>

<span class="nc" id="L353">							ligne = &quot;&quot;;</span>
							/*
							 * Compter le nombre de retour à la ligne Sachant que le nombre de lignes se
							 * trouve en ajoutant 1 au nombre final de retour à la ligne
							 */
						}

					} // for

				} // while

<span class="nc" id="L364">				String ligne0 = lignes.get(0); // 5 5</span>

<span class="nc" id="L366">				String ligne1 = lignes.get(1);// 1 2 N</span>

<span class="nc" id="L368">				String instructions1 = lignes.get(2);// GAGAGAGAA</span>

<span class="nc" id="L370">				String ligne3 = lignes.get(3);// 3 3 E</span>

<span class="nc" id="L372">				String instructions2 = lignes.get(4);// AADAADADDA</span>

<span class="nc" id="L374">				int xCD = Integer.parseInt(ligne0.charAt(0) + &quot;&quot;);// 5</span>

<span class="nc" id="L376">				int yCD = Integer.parseInt(ligne0.charAt(2) + &quot;&quot;);// 5</span>

<span class="nc" id="L378">				int xT1 = Integer.parseInt(ligne1.charAt(0) + &quot;&quot;);// 1</span>

<span class="nc" id="L380">				int yT1 = Integer.parseInt(ligne1.charAt(2) + &quot;&quot;);// 2</span>

<span class="nc" id="L382">				String o1 = ligne1.charAt(4) + &quot;&quot;;// N</span>

<span class="nc" id="L384">				int xT2 = Integer.parseInt(ligne3.charAt(0) + &quot;&quot;);// 3</span>

<span class="nc" id="L386">				int yT2 = Integer.parseInt(ligne3.charAt(2) + &quot;&quot;);// 3</span>

<span class="nc" id="L388">				String o2 = ligne3.charAt(4) + &quot;&quot;;// E</span>

<span class="nc" id="L390">				listeInitiale.add(new AutonomousCar(xCD, yCD, xT1, yT1, o1, instructions1));</span>

<span class="nc" id="L392">				listeInitiale.add(new AutonomousCar(xCD, yCD, xT2, yT2, o2, instructions2));</span>

<span class="nc" id="L394">			} catch (IOException e) {</span>

<span class="nc" id="L396">				e.printStackTrace();</span>
			} finally {

<span class="nc" id="L399">				try {</span>
<span class="nc bnc" id="L400" title="All 6 branches missed.">					if (inputStream != null)</span>
<span class="nc" id="L401">						inputStream.close();</span>
<span class="nc" id="L402">				} catch (IOException e) {</span>
<span class="nc" id="L403">					e.printStackTrace();</span>
<span class="nc" id="L404">				}</span>
<span class="nc" id="L405">			}</span>

		} else {

<span class="nc" id="L409">			AutonomousCarLog.logger.error(&quot;Fichier de base introuvable&quot;);</span>

		}
<span class="nc" id="L412">		return listeInitiale;</span>

	}

	/**
	 * Using Random class to generate a number of cars from 1 to
	 * {@value AutonomousCarService#NUMBER_OF_VEHICLES_MAX}
	 * 
	 * @see AutonomousCarService#NUMBER_OF_VEHICLES_MAX
	 * 
	 * @return Returns the number of cars generated randomly
	 * 
	 */

	private int getNombreDeVehicules4HWC() {
<span class="nc" id="L427">		Random randomNumbers = new Random();</span>

<span class="nc" id="L429">		return randomNumbers.nextInt(NUMBER_OF_VEHICLES_MAX) + 1;</span>
	}

	/**
	 * Using Random class to generate a number from 0 to 5 representing
	 * {@link AutonomousCar#getXCoinDroit()} and
	 * {@link AutonomousCar#getYCoinDroit()}
	 * 
	 * 
	 * @return Returns a number from 0 to 5
	 * 
	 */

	public int getXYCoinDroit4HWC() {

<span class="fc" id="L444">		return new Random().nextInt(6);</span>
	}

	/**
	 * Using Random class to generate a number from 1 to
	 * {@link AutonomousCarService#getXYCoinDroit4HWC()} representing
	 * {@link AutonomousCar#getXInitiale()} and {@link AutonomousCar#getYInitiale()}
	 * 
	 * 
	 * @param xy representing {@link AutonomousCarService#getXYCoinDroit4HWC()}
	 * 
	 * 
	 * @return Returns a number from 0 to 5
	 * 
	 */

	public int getXYInitiale4HWC(int xy) {

<span class="fc" id="L462">		return new Random().nextInt(xy + 1);</span>

	}

	/**
	 * Using Random class to generate an initial orientation amongst N,E,W,S
	 * representing {@link AutonomousCar#getOrientationInitiale()}
	 * 
	 * 
	 * @return Returns a value amongst N,E,W,S
	 * 
	 */

	private String getOrientationInitiale4HWC() {
<span class="nc" id="L476">		String tabOrientations[] = { &quot;N&quot;, &quot;E&quot;, &quot;W&quot;, &quot;S&quot; };</span>

<span class="nc" id="L478">		Random randomNumbers = new Random();</span>

<span class="nc" id="L480">		return tabOrientations[randomNumbers.nextInt(tabOrientations.length)];</span>

	}

	/**
	 * Using Random class to generate instructions defined by D,G or A representing
	 * {@link AutonomousCar#getInstructions()}
	 * 
	 * 
	 * @return Returns a String defined by D,G or A
	 * 
	 */

	private String getInstructions4HWC() {
<span class="nc" id="L494">		String tabInstructions[] = { &quot;D&quot;, &quot;G&quot;, &quot;A&quot; };</span>

<span class="nc" id="L496">		Random randomNumbers = new Random();</span>

<span class="nc" id="L498">		int tailleInstructions = randomNumbers.nextInt(NUMBER_OF_INSTRUCTIONS_MAX) + 1; // 1 to</span>
																						// NUMBER_OF_INSTRUCTIONS_MAX
																						// (50)
		/*
		 * Don't use StringBuilder
		 * 
		 * Why ? java.lang.OutOfMemoryError : Java heap space
		 * 
		 * StringBuilder instructions4HWC = new StringBuilder();
		 * 
		 * Random randomNumbers2 = new Random();
		 * 
		 * for (int t = 0; t &lt; tailleInstructions; t++)
		 * 
		 * instructions4HWC.append(instructions4HWC.toString())
		 * .append(tabInstructions[randomNumbers2.nextInt(tabInstructions.length)]);
		 * 
		 * return instructions4HWC.toString();
		 */

<span class="nc" id="L518">		String instructions4HWC = &quot;&quot;;</span>

<span class="nc" id="L520">		Random randomNumbers2 = new Random();</span>

<span class="nc bnc" id="L522" title="All 2 branches missed.">		for (int t = 0; t &lt; tailleInstructions; t++)</span>

<span class="nc" id="L524">			instructions4HWC = instructions4HWC + tabInstructions[randomNumbers2.nextInt(tabInstructions.length)];</span>

<span class="nc" id="L526">		return instructions4HWC;</span>

	}

	/**
	 * &lt;p&gt;
	 * Generates a list of Autonomous Cars using those methods:
	 * &lt;ul&gt;
	 * &lt;li&gt;AutonomousCarService{@link #getNombreDeVehicules4HWC()}&lt;/li&gt;
	 * &lt;li&gt;AutonomousCarService{@link #getXYCoinDroit4HWC()}&lt;/li&gt;
	 * &lt;li&gt;AutonomousCarService{@link #getXYInitiale4HWC(int)}&lt;/li&gt;
	 * &lt;li&gt;AutonomousCarService{@link #getOrientationInitiale4HWC()}&lt;/li&gt;
	 * &lt;li&gt;AutonomousCarService{@link #getInstructions4HWC()}&lt;/li&gt;
	 * &lt;/ul&gt;
	 * &lt;/p&gt;
	 * 
	 * 
	 * 
	 * @return Returns List&lt;AutonomousCar&gt; generated randomly
	 * 
	 */

	public List&lt;AutonomousCar&gt; getVehicules4HWC() {

<span class="nc" id="L550">		List&lt;AutonomousCar&gt; liste = new ArrayList&lt;AutonomousCar&gt;();</span>

<span class="nc bnc" id="L552" title="All 2 branches missed.">		for (int i = 0; i &lt; getNombreDeVehicules4HWC(); i++) {</span>

			/*
			 * Initial postions depends on Surface so it's important to save it first. if
			 * not the values will be wrong.
			 * 
			 */

<span class="nc" id="L560">			int xCD = getXYCoinDroit4HWC();</span>

<span class="nc" id="L562">			int yCD = getXYCoinDroit4HWC();</span>

<span class="nc" id="L564">			liste.add(new AutonomousCar(xCD, yCD, getXYInitiale4HWC(xCD), getXYInitiale4HWC(yCD),</span>
<span class="nc" id="L565">					getOrientationInitiale4HWC(), getInstructions4HWC()));</span>

		}

<span class="nc" id="L569">		return liste;</span>
	}

	/**
	 * @param vehiculeEnDeplacement
	 * 
	 *                              Generate a list of Autonomous Cars representing
	 *                              the states of vehiculeEnDeplacement.
	 * 
	 *                              Each AutonomousCar present in the list
	 *                              represents a state of the main car
	 *                              vehiculeEnDeplacement.
	 * 
	 *                              The states of vehiculeEnDeplacement are
	 *                              recorded.
	 * 
	 * 
	 * 
	 * @return List&lt;AutonomousCar&gt;
	 */

	public List&lt;AutonomousCar&gt; autonomousCarStates(AutonomousCar vehiculeEnDeplacement)

	{

		// A chaque mise à jour des paramètres, j'ajoute à mon ArrayList

<span class="nc" id="L596">		List&lt;AutonomousCar&gt; vehiculeAvecParametresDifferents = new ArrayList&lt;&gt;();</span>

		// Enregistrement des paramètres initiaux du véhicule

<span class="nc" id="L600">		vehiculeAvecParametresDifferents</span>
<span class="nc" id="L601">				.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(), vehiculeEnDeplacement.getYCoinDroit(),</span>
<span class="nc" id="L602">						vehiculeEnDeplacement.getXInitiale(), vehiculeEnDeplacement.getYInitiale(),</span>
<span class="nc" id="L603">						vehiculeEnDeplacement.getOrientationInitiale(), vehiculeEnDeplacement.getInstructions()));</span>

<span class="nc" id="L605">		String instructionsASuivre = vehiculeEnDeplacement.getInstructions();</span>

<span class="nc bnc" id="L607" title="All 2 branches missed.">		for (int i = 0; i &lt; instructionsASuivre.length(); i++) // Suivre les</span>
																// instructions

		{
<span class="nc" id="L611">			String instructionActuelle = instructionsASuivre.charAt(i) + &quot;&quot;; // char</span>
																				// to
																				// String

<span class="nc" id="L615">			String orientationActuelle = vehiculeEnDeplacement.getOrientationActuelle();</span>

<span class="nc" id="L617">			int xActuelle = vehiculeEnDeplacement.getXActuelle();</span>

<span class="nc" id="L619">			int yActuelle = vehiculeEnDeplacement.getYActuelle();</span>

			// Tourner à droite

			// Modification de l'orientation

<span class="nc bnc" id="L625" title="All 2 branches missed.">			if (instructionActuelle.equals(&quot;D&quot;))</span>

			{

<span class="nc bnc" id="L629" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;N&quot;)) {</span>
<span class="nc" id="L630">					vehiculeEnDeplacement.setOrientationActuelle(&quot;E&quot;);</span>

<span class="nc" id="L632">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L633">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L634">							vehiculeEnDeplacement.getYActuelle(), &quot;E&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}

<span class="nc bnc" id="L637" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;E&quot;)) {</span>
<span class="nc" id="L638">					vehiculeEnDeplacement.setOrientationActuelle(&quot;S&quot;);</span>

<span class="nc" id="L640">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L641">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L642">							vehiculeEnDeplacement.getYActuelle(), &quot;S&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}

<span class="nc bnc" id="L645" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;W&quot;)) {</span>
<span class="nc" id="L646">					vehiculeEnDeplacement.setOrientationActuelle(&quot;N&quot;);</span>

<span class="nc" id="L648">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L649">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L650">							vehiculeEnDeplacement.getYActuelle(), &quot;N&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}

<span class="nc bnc" id="L653" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;S&quot;)) {</span>
<span class="nc" id="L654">					vehiculeEnDeplacement.setOrientationActuelle(&quot;W&quot;);</span>

<span class="nc" id="L656">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L657">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L658">							vehiculeEnDeplacement.getYActuelle(), &quot;W&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}
			}

			// Tourner à gauche

			// Modification de l'orientation

<span class="nc bnc" id="L666" title="All 2 branches missed.">			if (instructionActuelle.equals(&quot;G&quot;)) {</span>

<span class="nc bnc" id="L668" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;N&quot;)) {</span>
<span class="nc" id="L669">					vehiculeEnDeplacement.setOrientationActuelle(&quot;W&quot;);</span>

<span class="nc" id="L671">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L672">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L673">							vehiculeEnDeplacement.getYActuelle(), &quot;W&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}

<span class="nc bnc" id="L676" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;E&quot;)) {</span>
<span class="nc" id="L677">					vehiculeEnDeplacement.setOrientationActuelle(&quot;N&quot;);</span>

<span class="nc" id="L679">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L680">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L681">							vehiculeEnDeplacement.getYActuelle(), &quot;N&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}

<span class="nc bnc" id="L684" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;W&quot;)) {</span>
<span class="nc" id="L685">					vehiculeEnDeplacement.setOrientationActuelle(&quot;S&quot;);</span>

<span class="nc" id="L687">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L688">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L689">							vehiculeEnDeplacement.getYActuelle(), &quot;S&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}

<span class="nc bnc" id="L692" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;S&quot;)) {</span>
<span class="nc" id="L693">					vehiculeEnDeplacement.setOrientationActuelle(&quot;E&quot;);</span>

<span class="nc" id="L695">					vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L696">							vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L697">							vehiculeEnDeplacement.getYActuelle(), &quot;E&quot;, vehiculeEnDeplacement.getInstructions()));</span>
				}
			}

			// Avancer

			// Se rassurer que la future position est dans la surface
			// Si oui Avancer
			// Sinon, pas de mouvement, orientation conservée puis traiter
			// instruction suivante(indice suivant)
			// Ne pas modifier l'orientation

<span class="nc bnc" id="L709" title="All 2 branches missed.">			if (instructionActuelle.equals(&quot;A&quot;)) {</span>
<span class="nc bnc" id="L710" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;N&quot;))// y+1</span>
				{
<span class="nc" id="L712">					int yActuelleFuture = yActuelle + 1;</span>

<span class="nc bnc" id="L714" title="All 4 branches missed.">					if (0 &lt;= yActuelleFuture &amp;&amp; yActuelleFuture &lt;= vehiculeEnDeplacement.getYCoinDroit())// Avancer</span>
					{
<span class="nc" id="L716">						vehiculeEnDeplacement.setYActuelle(yActuelleFuture);</span>

<span class="nc" id="L718">						vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L719">								vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L720">								yActuelleFuture, vehiculeEnDeplacement.getOrientationActuelle(),</span>
<span class="nc" id="L721">								vehiculeEnDeplacement.getInstructions()));</span>
					} else {
						continue; // Passage à la commande suivante
					}
				}

<span class="nc bnc" id="L727" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;E&quot;))// x+1</span>
				{
<span class="nc" id="L729">					int xActuelleFuture = xActuelle + 1;</span>

<span class="nc bnc" id="L731" title="All 4 branches missed.">					if (0 &lt;= xActuelleFuture &amp;&amp; xActuelleFuture &lt;= vehiculeEnDeplacement.getXCoinDroit())// Avancer</span>
					{
<span class="nc" id="L733">						vehiculeEnDeplacement.setXActuelle(xActuelleFuture);</span>

<span class="nc" id="L735">						vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L736">								vehiculeEnDeplacement.getYCoinDroit(), xActuelleFuture,</span>
<span class="nc" id="L737">								vehiculeEnDeplacement.getYActuelle(), vehiculeEnDeplacement.getOrientationActuelle(),</span>
<span class="nc" id="L738">								vehiculeEnDeplacement.getInstructions()));</span>
					} else {
						continue; // Passage à la commande suivante
					}
				}

<span class="nc bnc" id="L744" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;W&quot;))// x-1</span>
				{
<span class="nc" id="L746">					int xActuelleFuture = xActuelle - 1;</span>

<span class="nc bnc" id="L748" title="All 4 branches missed.">					if (0 &lt;= xActuelleFuture &amp;&amp; xActuelleFuture &lt;= vehiculeEnDeplacement.getXCoinDroit())// Avancer</span>
					{
<span class="nc" id="L750">						vehiculeEnDeplacement.setXActuelle(xActuelleFuture);</span>

<span class="nc" id="L752">						vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L753">								vehiculeEnDeplacement.getYCoinDroit(), xActuelleFuture,</span>
<span class="nc" id="L754">								vehiculeEnDeplacement.getYActuelle(), vehiculeEnDeplacement.getOrientationActuelle(),</span>
<span class="nc" id="L755">								vehiculeEnDeplacement.getInstructions()));</span>
					} else {
						continue; // Passage à la commande suivante
					}
				}

<span class="nc bnc" id="L761" title="All 2 branches missed.">				if (orientationActuelle.equals(&quot;S&quot;))// y-1</span>
				{
<span class="nc" id="L763">					int yActuelleFuture = yActuelle - 1;</span>

<span class="nc bnc" id="L765" title="All 4 branches missed.">					if (0 &lt;= yActuelleFuture &amp;&amp; yActuelleFuture &lt;= vehiculeEnDeplacement.getYCoinDroit())// Avancer</span>
					{
<span class="nc" id="L767">						vehiculeEnDeplacement.setYActuelle(yActuelleFuture);</span>

<span class="nc" id="L769">						vehiculeAvecParametresDifferents.add(new AutonomousCar(vehiculeEnDeplacement.getXCoinDroit(),</span>
<span class="nc" id="L770">								vehiculeEnDeplacement.getYCoinDroit(), vehiculeEnDeplacement.getXActuelle(),</span>
<span class="nc" id="L771">								yActuelleFuture, vehiculeEnDeplacement.getOrientationActuelle(),</span>
<span class="nc" id="L772">								vehiculeEnDeplacement.getInstructions()));</span>
					} else {
						continue; // Passage à l'instruction suivante
					}
				}
			}

		} // for

<span class="nc" id="L781">		return vehiculeAvecParametresDifferents;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>